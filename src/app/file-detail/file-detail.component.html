<div *ngIf="isOpen" @openClose class="open-close-container">
  <button (click)="onCancel()" class="close-button" mat-icon-button>
    <mat-icon>close</mat-icon>
  </button>
  <h2>{{file.name}}</h2>
  <mat-tab-group class="mat-tab-fill-height" dynamicHeight>

    <mat-tab label="Informations du fichier">
      <form (ngSubmit)="onSubmitFile()" [formGroup]="fileForm" class="info-form">
        <div class="form-content-wrapper">
          <mat-form-field appearance="fill">
            <mat-label>Nom original du fichier
            </mat-label>
            <input [value]="file.name" disabled matInput/>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Je modifie le nom du fichier
            </mat-label>
            <input formControlName="name" matInput/>
          </mat-form-field>
          <div class="date-group">
            <mat-form-field appearance="fill">
              <mat-label>Date de début
              </mat-label>
              <input [matDatepicker]="pickerStart" formControlName="startDate" matInput/>
              <mat-datepicker-toggle [for]="pickerStart" matSuffix></mat-datepicker-toggle>
              <mat-datepicker #pickerStart></mat-datepicker>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Date de fin
              </mat-label>
              <input [matDatepicker]="pickerEnd" formControlName="endDate" matInput/>
              <mat-datepicker-toggle [for]="pickerEnd" matSuffix></mat-datepicker-toggle>
              <mat-datepicker #pickerEnd></mat-datepicker>
            </mat-form-field>
          </div>
          <mat-form-field appearance="fill">
            <mat-label>J'ajoute une description sommaire à mon fichier
            </mat-label>
            <textarea formControlName="description" matInput></textarea>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>J'ajoute un historique de conservation à mon fichier
            </mat-label>
            <textarea formControlName="rule" matInput></textarea>
          </mat-form-field>
        </div>
        <div class="button-group">
          <button (click)="onCancel()" mat-stroked-button>
            Annuler
          </button>
          <button color="primary" mat-flat-button type="submit">
            Valider
          </button>
        </div>
      </form>
    </mat-tab>

    <mat-tab label="Remarques">
      <form (ngSubmit)="onSubmitComment()" [formGroup]="commentForm" class="info-form">
        <div class="form-content-wrapper">
          <div *ngFor="let comment of comments" class="comment">
            <div class="mat-small">
              <span>{{comment.user}}</span>
              <span>{{comment.date | date}}</span>
            </div>
            <mat-card>
              <mat-card-content>
                <p>
                  {{comment.text}}
                </p>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
        <mat-form-field appearance="fill">
          <mat-label>Je commente
          </mat-label>
          <textarea formControlName="text" matInput></textarea>
        </mat-form-field>
        <div class="button-group">
          <button (click)="onCancel()" mat-stroked-button>
            Annuler
          </button>
          <button color="primary" mat-flat-button type="submit">
            Envoyer
          </button>
        </div>
      </form>
    </mat-tab>

  </mat-tab-group>
</div>
